## çŸ¥è¯†ç‚¹ç›®å½•æ‘˜è¦
- ä¸€ã€å…ƒç´ ä¸ç»„ä»¶
- äºŒã€jsxåŸç†
- ä¸‰ã€ç»„ä»¶çš„æ•°æ®æŒ‚è½½æ–¹å¼ï¼ˆprops, stateï¼‰
- å››ã€äº‹ä»¶å¤„ç†
- äº”ã€è¡¨å•
- å…­ã€ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ
- ä¸ƒã€ç»„ä»¶é€šä¿¡
- å…«ã€HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰
- ä¹ã€Protal
- åã€çŠ¶æ€ç®¡ç†
- åä¸€ã€React Router
- åäºŒã€Immutable.js
- åä¸‰ã€Lazyå’ŒSuspense
- åå››ã€React Hooks
- åäº”ã€Mobx

# ä¸€ã€å…ƒç´ ä¸ç»„ä»¶

å¦‚æœä»£ç å¤šäº†ä¹‹åï¼Œä¸å¯èƒ½ä¸€ç›´åœ¨renderæ–¹æ³•é‡Œå†™ï¼Œæ‰€ä»¥å°±éœ€è¦æŠŠé‡Œé¢çš„ä»£ç æå‡ºæ¥ï¼Œå®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œåƒè¿™æ ·ï¼š

```jsx
import React from 'react'
import ReactDOM from 'react-dom'
// è¿™é‡Œæ„Ÿè§‰åˆä¸ä¹ æƒ¯äº†ï¼Ÿè¿™æ˜¯åœ¨ç”¨JSXå®šä¹‰ä¸€ä¸‹reactå…ƒç´ 
const app = <h1>æ¬¢è¿è¿›å…¥Reactçš„ä¸–ç•Œ</h1>
ReactDOM.render(
  app,
  document.getElementById('root')
)
```

## 1ã€å‡½æ•°å¼ç»„ä»¶

ç”±äºå…ƒç´ æ²¡æœ‰åŠæ³•ä¼ é€’å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦æŠŠä¹‹å‰å®šä¹‰çš„å˜é‡æ”¹ä¸ºä¸€ä¸ªæ–¹æ³•ï¼Œè®©è¿™ä¸ªæ–¹æ³•å»returnä¸€ä¸ªå…ƒç´ :

```jsx
import React from 'react'
import ReactDOM from 'react-dom'

// ç‰¹åˆ«æ³¨æ„è¿™é‡Œçš„å†™æ³•ï¼Œå¦‚æœè¦åœ¨JSXé‡Œå†™jsè¡¨è¾¾å¼(åªèƒ½æ˜¯è¡¨è¾¾å¼ï¼Œä¸èƒ½æµç¨‹æ§åˆ¶)ï¼Œå°±éœ€è¦åŠ  {}ï¼ŒåŒ…æ‹¬æ³¨é‡Šä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¹¶ä¸”å¯ä»¥å¤šå±‚åµŒå¥—
const app = (props) => <h1>æ¬¢è¿è¿›å…¥{props.name}çš„ä¸–ç•Œ</h1>

ReactDOM.render(
  app({
    name: 'react'
  }),
  document.getElementById('root')
)
```

è¿™é‡Œæˆ‘ä»¬å®šä¹‰çš„æ–¹æ³•å®é™…ä¸Šä¹Ÿæ˜¯reactå®šä¹‰ç»„ä»¶çš„ç¬¬ä¸€ç§æ–¹å¼-å®šä¹‰å‡½æ•°å¼ç»„ä»¶ï¼Œè¿™ä¹Ÿæ˜¯æ— çŠ¶æ€ç»„ä»¶ã€‚ä½†æ˜¯è¿™ç§å†™æ³•ä¸ç¬¦åˆreactçš„jsxçš„é£æ ¼ï¼Œæ›´å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è¿›è¡Œæ”¹é€ 

```jsx
import React from 'react'
import ReactDOM from 'react-dom'

const App = (props) => <h1>æ¬¢è¿è¿›å…¥{props.name}çš„ä¸–ç•Œ</h1>

ReactDOM.render(
  // Reactç»„ä»¶çš„è°ƒç”¨æ–¹å¼
  <App name="react" />,
  document.getElementById('root')
)
```

è¿™æ ·ä¸€ä¸ªå®Œæ•´çš„å‡½æ•°å¼ç»„ä»¶å°±å®šä¹‰å¥½äº†ã€‚ä½†è¦**æ³¨æ„ï¼æ³¨æ„ï¼æ³¨æ„ï¼**ç»„ä»¶åå¿…é¡»**å¤§å†™**ï¼Œå¦åˆ™æŠ¥é”™ã€‚

## 2ã€classç»„ä»¶

ES6çš„åŠ å…¥è®©JavaScriptç›´æ¥æ”¯æŒä½¿ç”¨classæ¥å®šä¹‰ä¸€ä¸ªç±»ï¼Œreactçš„ç¬¬äºŒç§åˆ›å»ºç»„ä»¶çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨çš„ç±»çš„ç»§æ‰¿ï¼Œ`ES6 class`æ˜¯ç›®å‰å®˜æ–¹æ¨èçš„ä½¿ç”¨æ–¹å¼ï¼Œå®ƒä½¿ç”¨äº†ES6æ ‡å‡†è¯­æ³•æ¥æ„å»ºï¼Œçœ‹ä»¥ä¸‹ä»£ç ï¼š

```jsx
import React from 'react'
import ReactDOM from 'react-dom'

class App extends React.Component {
  render () {
    return (
      // æ³¨æ„è¿™é‡Œå¾—ç”¨this.props.name, å¿…é¡»ç”¨this.props
      <h1>æ¬¢è¿è¿›å…¥{this.props.name}çš„ä¸–ç•Œ</h1>
  	)
  }
}
ReactDOM.render(
  <App name="react" />,
  document.getElementById('root')
)
```

è¿è¡Œç»“æœå’Œä¹‹å‰å®Œå…¨ä¸€æ ·ï¼Œå› ä¸ºJSé‡Œæ²¡æœ‰çœŸæ­£çš„classï¼Œè¿™ä¸ªclassåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–, ä½†äºŒè€…çš„è¿è¡Œæœºåˆ¶åº•å±‚è¿è¡Œæœºåˆ¶ä¸ä¸€æ ·ã€‚
- å‡½æ•°å¼ç»„ä»¶æ˜¯ç›´æ¥è°ƒç”¨, åœ¨å‰é¢çš„ä»£ç é‡Œå·²ç»æœ‰çœ‹åˆ°

- ```es6 class```ç»„ä»¶å…¶å®å°±æ˜¯ä¸€ä¸ªæ„é€ å™¨,æ¯æ¬¡ä½¿ç”¨ç»„ä»¶éƒ½ç›¸å½“äºåœ¨å®ä¾‹åŒ–ç»„ä»¶ï¼Œåƒè¿™æ ·ï¼š

  ```jsx
  import React from 'react'
  import ReactDOM from 'react-dom'
  
  class App extends React.Component {
    render () {
      return (
    		<h1>æ¬¢è¿è¿›å…¥{this.props.name}çš„ä¸–ç•Œ</h1>
    	)
    }
  }
  
  const app = new App({
    name: 'react'
  }).render()
  
  ReactDOM.render(
    app,
    document.getElementById('root')
  )
  ```
## 3ã€æ›´è€çš„ä¸€ç§æ–¹æ³•

åœ¨16ä»¥å‰çš„ç‰ˆæœ¬è¿˜æ”¯æŒè¿™æ ·åˆ›å»ºç»„ä»¶, ä½†ç°åœ¨çš„é¡¹ç›®åŸºæœ¬ä¸Šä¸ç”¨

```jsx
React.createClass({
  render () {
    return (
      <div>{this.props.xxx}</div>
  	)
  }
})
```

## 4ã€ç»„ä»¶çš„ç»„åˆã€åµŒå¥—

å°†ä¸€ä¸ªç»„ä»¶æ¸²æŸ“åˆ°æŸä¸€ä¸ªèŠ‚ç‚¹é‡Œçš„æ—¶å€™ï¼Œä¼šå°†è¿™ä¸ªèŠ‚ç‚¹é‡ŒåŸæœ‰å†…å®¹è¦†ç›–

ç»„ä»¶åµŒå¥—çš„æ–¹å¼å°±æ˜¯å°†å­ç»„ä»¶å†™å…¥åˆ°çˆ¶ç»„ä»¶çš„æ¨¡æ¿ä¸­å»ï¼Œä¸”reactæ²¡æœ‰Vueä¸­çš„å†…å®¹åˆ†å‘æœºåˆ¶ï¼ˆslotï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä¸€ä¸ªç»„ä»¶çš„æ¨¡æ¿ä¸­åªèƒ½çœ‹åˆ°çˆ¶å­å…³ç³»

```jsx
// ä» react çš„åŒ…å½“ä¸­å¼•å…¥äº† React å’Œ React.js çš„ç»„ä»¶çˆ¶ç±» Component
// è¿˜å¼•å…¥äº†ä¸€ä¸ªReact.jsé‡Œçš„ä¸€ç§ç‰¹æ®Šçš„ç»„ä»¶ Fragment
import React, { Component, Fragment } from 'react'
import ReactDOM from 'react-dom'

class Title extends Component {
  render () {
    return (
      <h1>æ¬¢è¿è¿›å…¥Reactçš„ä¸–ç•Œ</h1>
  	)
  }
}
class Content extends Component {
  render () {
    return (
      <p>React.jsæ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</p>
  	)
  }
}
/** ç”±äºæ¯ä¸ªReactç»„ä»¶åªèƒ½æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¦æ¸²æŸ“å¤šä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œéœ€è¦åœ¨æœ€å¤–å±‚åŒ…ä¸€ä¸ªå®¹å™¨ï¼Œå¦‚æœä½¿ç”¨div, ä¼šç”Ÿæˆå¤šä½™çš„ä¸€å±‚dom
class App extends Component {
  render () {
    return (
    	<div>
    		<Title />
        <Content />
      </div>
  	)
  }
}
**/
// å¦‚æœä¸æƒ³ç”Ÿæˆå¤šä½™çš„ä¸€å±‚domå¯ä»¥ä½¿ç”¨Reactæä¾›çš„Fragmentç»„ä»¶åœ¨æœ€å¤–å±‚è¿›è¡ŒåŒ…è£¹
class App extends Component {
  render () {
    return (
      <Fragment>
      	<Title />
        <Content />
      </Fragment>
  	)
  }
}
ReactDOM.render(
  <App/>,
  document.getElementById('root')
)
```

# äºŒã€jsxåŸç†
è¦æ˜ç™½JSXçš„åŸç†ï¼Œéœ€è¦å…ˆæ˜ç™½å¦‚ä½•ç”¨ JavaScript å¯¹è±¡æ¥è¡¨ç°ä¸€ä¸ª DOM å…ƒç´ çš„ç»“æ„?

çœ‹ä¸‹é¢çš„DOMç»“æ„

```html
<div class='app' id='appRoot'>
  <h1 class='title'>æ¬¢è¿è¿›å…¥Reactçš„ä¸–ç•Œ</h1>
  <p>
    React.js æ˜¯ä¸€ä¸ªå¸®åŠ©ä½ æ„å»ºé¡µé¢ UI çš„åº“
  </p>
</div>
```
ä¸Šé¢è¿™ä¸ª HTML æ‰€æœ‰çš„ä¿¡æ¯æˆ‘ä»¬éƒ½å¯ä»¥ç”¨ JavaScript å¯¹è±¡æ¥è¡¨ç¤ºï¼š

```js
{
  tag: 'div',
  attrs: { className: 'app', id: 'appRoot'},
  children: [
    {
      tag: 'h1',
      attrs: { className: 'title' },
      children: ['æ¬¢è¿è¿›å…¥Reactçš„ä¸–ç•Œ']
    },
    {
      tag: 'p',
      attrs: null,
      children: ['React.js æ˜¯ä¸€ä¸ªæ„å»ºé¡µé¢ UI çš„åº“']
    }
  ]
}
```
ä½†æ˜¯ç”¨ JavaScript å†™èµ·æ¥å¤ªé•¿äº†ï¼Œç»“æ„çœ‹èµ·æ¥åˆä¸æ¸…æ™°ï¼Œç”¨ HTML çš„æ–¹å¼å†™èµ·æ¥å°±æ–¹ä¾¿å¾ˆå¤šäº†ã€‚

äºæ˜¯ React.js å°±æŠŠ JavaScript çš„è¯­æ³•æ‰©å±•äº†ä¸€ä¸‹ï¼Œè®© JavaScript è¯­è¨€èƒ½å¤Ÿæ”¯æŒè¿™ç§ç›´æ¥åœ¨ JavaScript ä»£ç é‡Œé¢ç¼–å†™ç±»ä¼¼ HTML æ ‡ç­¾ç»“æ„çš„è¯­æ³•ï¼Œè¿™æ ·å†™èµ·æ¥å°±æ–¹ä¾¿å¾ˆå¤šäº†ã€‚ç¼–è¯‘çš„è¿‡ç¨‹ä¼šæŠŠç±»ä¼¼ HTML çš„ JSX ç»“æ„è½¬æ¢æˆ JavaScript çš„å¯¹è±¡ç»“æ„ã€‚

ä¸‹é¢ä»£ç :

```jsx
import React from 'react'
import ReactDOM from 'react-dom'

class App extends React.Component {
  render () {
    return (
      <div className='app' id='appRoot'>
        <h1 className='title'>æ¬¢è¿è¿›å…¥Reactçš„ä¸–ç•Œ</h1>
        <p>
          React.js æ˜¯ä¸€ä¸ªæ„å»ºé¡µé¢ UI çš„åº“
        </p>
      </div>
    )
  }
}

ReactDOM.render(
	<App />,
  document.getElementById('root')
)
```
ç¼–è¯‘ä¹‹åå°†å¾—åˆ°è¿™æ ·çš„ä»£ç :

```jsx
import React from 'react'
import ReactDOM from 'react-dom'

class App extends React.Component {
  render () {
    return (
      React.createElement(
        "div",
        {
          className: 'app',
          id: 'appRoot'
        },
        React.createElement(
          "h1",
          { className: 'title' },
          "æ¬¢è¿è¿›å…¥Reactçš„ä¸–ç•Œ"
        ),
        React.createElement(
          "p",
          null,
          "React.js æ˜¯ä¸€ä¸ªæ„å»ºé¡µé¢ UI çš„åº“"
        )
      )
    )
  }
}

ReactDOM.render(
	React.createElement(App),
  document.getElementById('root')
)
```
`React.createElement` ä¼šæ„å»ºä¸€ä¸ª JavaScript å¯¹è±¡æ¥æè¿°ä½  HTML ç»“æ„çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ ‡ç­¾åã€å±æ€§ã€è¿˜æœ‰å­å…ƒç´ ç­‰, è¯­æ³•ä¸º

```jsx
React.createElement(
  type,
  [props],
  [...children]
)
```

æ‰€è°“çš„ JSX å…¶å®å°±æ˜¯ JavaScript å¯¹è±¡ï¼Œæ‰€ä»¥ä½¿ç”¨ React å’Œ JSX çš„æ—¶å€™ä¸€å®šè¦ç»è¿‡ç¼–è¯‘çš„è¿‡ç¨‹:

> JSX â€”ä½¿ç”¨reactæ„é€ ç»„ä»¶ï¼Œbableè¿›è¡Œç¼–è¯‘â€”> JavaScriptå¯¹è±¡ â€” `ReactDOM.render()`â€”>DOMå…ƒç´  â€”>æ’å…¥é¡µé¢



ä¸‰ã€ç»„ä»¶ä¸­çš„æ ·å¼

- è¡Œå†…æ ·å¼

æƒ³ç»™è™šæ‹Ÿdomæ·»åŠ è¡Œå†…æ ·å¼ï¼Œéœ€è¦ä½¿ç”¨è¡¨è¾¾å¼ä¼ å…¥æ ·å¼å¯¹è±¡çš„æ–¹å¼æ¥å®ç°ï¼š

```jsx
// æ³¨æ„è¿™é‡Œçš„ä¸¤ä¸ªæ‹¬å·ï¼Œç¬¬ä¸€ä¸ªè¡¨ç¤ºæˆ‘ä»¬åœ¨è¦JSXé‡Œæ’å…¥JSäº†ï¼Œç¬¬äºŒä¸ªæ˜¯å¯¹è±¡çš„æ‹¬å·
 <p style={{color:'red', fontSize:'14px'}}>Hello world</p>
```

è¡Œå†…æ ·å¼éœ€è¦å†™å…¥ä¸€ä¸ªæ ·å¼å¯¹è±¡ï¼Œè€Œè¿™ä¸ªæ ·å¼å¯¹è±¡çš„ä½ç½®å¯ä»¥æ”¾åœ¨å¾ˆå¤šåœ°æ–¹ï¼Œä¾‹å¦‚`render`å‡½æ•°é‡Œã€ç»„ä»¶åŸå‹ä¸Šã€å¤–é“¾jsæ–‡ä»¶ä¸­

- ä½¿ç”¨`class`

Reactæ¨èæˆ‘ä»¬ä½¿ç”¨è¡Œå†…æ ·å¼ï¼Œå› ä¸ºReactè§‰å¾—æ¯ä¸€ä¸ªç»„ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ•´ä½“

å…¶å®æˆ‘ä»¬å¤§å¤šæ•°æƒ…å†µä¸‹è¿˜æ˜¯å¤§é‡çš„åœ¨ä¸ºå…ƒç´ æ·»åŠ ç±»åï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`class`éœ€è¦å†™æˆ`className`ï¼ˆå› ä¸ºæ¯•ç«Ÿæ˜¯åœ¨å†™ç±»jsä»£ç ï¼Œä¼šæ”¶åˆ°jsè§„åˆ™çš„ç°åœ¨ï¼Œè€Œ`class`æ˜¯å…³é”®å­—ï¼‰

```jsx
<p className="hello" style = {this.style}>Hello world</p>
```

- ä¸åŒçš„æ¡ä»¶æ·»åŠ ä¸åŒçš„æ ·å¼

æœ‰æ—¶å€™éœ€è¦æ ¹æ®ä¸åŒçš„æ¡ä»¶æ·»åŠ ä¸åŒçš„æ ·å¼ï¼Œæ¯”å¦‚ï¼šå®ŒæˆçŠ¶æ€ï¼Œå®Œæˆæ˜¯ç»¿è‰²ï¼Œæœªå®Œæˆæ˜¯çº¢è‰²ã€‚é‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨[classnames](<https://www.npmjs.com/package/classnames>)è¿™ä¸ªåŒ…ï¼š

- css-in-js

`styled-components`æ˜¯é’ˆå¯¹Reactå†™çš„ä¸€å¥—css-in-jsæ¡†æ¶ï¼Œç®€å•æ¥è®²å°±æ˜¯åœ¨jsä¸­å†™cssã€‚[npmé“¾æ¥](<https://www.npmjs.com/package/styled-components>)

# ä¸‰ã€ç»„ä»¶çš„æ•°æ®æŒ‚è½½æ–¹å¼ï¼ˆprops, stateï¼‰

## 1ã€å±æ€§(props)

`props`æ˜¯æ­£å¸¸æ˜¯å¤–éƒ¨ä¼ å…¥çš„ï¼Œç»„ä»¶å†…éƒ¨ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æ–¹å¼æ¥åˆå§‹åŒ–çš„è®¾ç½®ï¼Œå±æ€§ä¸èƒ½è¢«ç»„ä»¶è‡ªå·±æ›´æ”¹ï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡çˆ¶ç»„ä»¶ä¸»åŠ¨é‡æ–°æ¸²æŸ“çš„æ–¹å¼æ¥ä¼ å…¥æ–°çš„ `props`

å±æ€§æ˜¯æè¿°æ€§è´¨ã€ç‰¹ç‚¹çš„ï¼Œç»„ä»¶è‡ªå·±ä¸èƒ½éšæ„æ›´æ”¹ã€‚

ä¹‹å‰çš„ç»„ä»¶ä»£ç é‡Œé¢æœ‰`props`çš„ç®€å•ä½¿ç”¨ï¼Œæ€»çš„æ¥è¯´ï¼Œåœ¨ä½¿ç”¨ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå‚æ•°æ”¾åœ¨æ ‡ç­¾çš„å±æ€§å½“ä¸­ï¼Œæ‰€æœ‰çš„å±æ€§éƒ½ä¼šä½œä¸ºç»„ä»¶ `props` å¯¹è±¡çš„é”®å€¼ã€‚é€šè¿‡ç®­å¤´å‡½æ•°åˆ›å»ºçš„ç»„ä»¶ï¼Œéœ€è¦é€šè¿‡å‡½æ•°çš„å‚æ•°æ¥æ¥æ”¶`props`:

```jsx
import React, { Component, Fragment } from 'react'
import ReactDOM from 'react-dom'

class Title extends Component {
  render () {
    return (
  		<h1>æ¬¢è¿è¿›å…¥{this.props.name}çš„ä¸–ç•Œ</h1>
  	)
  }
}
const Content = (props) => {
  return (
    <p>{props.name}æ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</p>
  )
}

class App extends Component {
  render () {
    return (
  		<Fragment>
      	<Title name="React" />
        <Content name="React.js" />
      </Fragment>
  	)
  }
}

ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```
###(1) è®¾ç½®ç»„ä»¶çš„é»˜è®¤props

```jsx
import React, { Component, Fragment } from 'react'
import ReactDOM from 'react-dom'

class Title extends Component {
  // ä½¿ç”¨ç±»åˆ›å»ºçš„ç»„ä»¶ï¼Œç›´æ¥åœ¨è¿™é‡Œå†™staticæ–¹æ³•ï¼Œåˆ›å»ºdefaultProps
  static defaultProps = {
    name: 'React'
  }
  render () {
    return (
  		<h1>æ¬¢è¿è¿›å…¥{this.props.name}çš„ä¸–ç•Œ</h1>
  	)
  }
}
const Content = (props) => {
  return (
    <p>{props.name}æ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</p>
  )
}

// ä½¿ç”¨ç®­å¤´å‡½æ•°åˆ›å»ºçš„ç»„ä»¶ï¼Œéœ€è¦åœ¨è¿™ä¸ªç»„ä»¶ä¸Šç›´æ¥å†™defaultPropså±æ€§
Content.defaultProps = {
  name: 'React.js'
}

class App extends Component {
  render () {
    return (
  		<Fragment>
        {/* ç”±äºè®¾ç½®äº†defaultPropsï¼Œ ä¸ä¼ propsä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼Œå¦‚æœä¼ é€’äº†å°±ä¼šè¦†ç›–defaultPropsçš„å€¼ */}
      	<Title />
        <Content />
      </Fragment>
  	)
  }
}

ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```
### (2) props.children

æˆ‘ä»¬çŸ¥é“ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥åµŒå¥—ã€‚è¦åœ¨è‡ªå®šä¹‰ç»„ä»¶çš„ä½¿ç”¨åµŒå¥—ç»“æ„ï¼Œå°±éœ€è¦ä½¿ç”¨ `props.children` ã€‚åœ¨å®é™…çš„å·¥ä½œå½“ä¸­ï¼Œæˆ‘ä»¬å‡ ä¹æ¯å¤©éƒ½éœ€è¦ç”¨è¿™ç§æ–¹å¼æ¥ç¼–å†™ç»„ä»¶ã€‚

```jsx
import React, { Component, Fragment } from 'react'
import ReactDOM from 'react-dom'

class Title extends Component {
  render () {
    return (
  		<h1>æ¬¢è¿è¿›å…¥{this.props.children}çš„ä¸–ç•Œ</h1>
  	)
  }
}
const Content = (props) => {
  return (
    <p>{props.children}</p>
  )
}

class App extends Component {
  render () {
    return (
  		<Fragment>
      	<Title>React</Title>
        <Content><i>React.js</i>æ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</Content>
      </Fragment>
  	)
  }
}

ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```
### (3) ä½¿ç”¨prop-typesæ£€æŸ¥props

Reactå…¶å®æ˜¯ä¸ºäº†æ„å»ºå¤§å‹åº”ç”¨ç¨‹åºè€Œç”Ÿ, åœ¨ä¸€ä¸ªå¤§å‹åº”ç”¨ä¸­ï¼Œæ ¹æœ¬ä¸çŸ¥é“åˆ«äººä½¿ç”¨ä½ å†™çš„ç»„ä»¶çš„æ—¶å€™ä¼šä¼ å…¥ä»€ä¹ˆæ ·çš„å‚æ•°ï¼Œæœ‰å¯èƒ½ä¼šé€ æˆåº”ç”¨ç¨‹åºè¿è¡Œä¸äº†ï¼Œä½†æ˜¯ä¸æŠ¥é”™ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒReactæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œè®©å†™ç»„ä»¶çš„äººå¯ä»¥ç»™ç»„ä»¶çš„```props```è®¾å®šå‚æ•°æ£€æŸ¥ï¼Œéœ€è¦å®‰è£…å’Œä½¿ç”¨[prop-types](<https://www.npmjs.com/package/prop-types>):

```sh
$ npm i prop-types -S
```

##2ã€çŠ¶æ€(state)

çŠ¶æ€å°±æ˜¯ç»„ä»¶æè¿°æŸç§æ˜¾ç¤ºæƒ…å†µçš„æ•°æ®ï¼Œç”±ç»„ä»¶è‡ªå·±è®¾ç½®å’Œæ›´æ”¹ï¼Œä¹Ÿå°±æ˜¯è¯´ç”±ç»„ä»¶è‡ªå·±ç»´æŠ¤ï¼Œä½¿ç”¨çŠ¶æ€çš„ç›®çš„å°±æ˜¯ä¸ºäº†åœ¨ä¸åŒçš„çŠ¶æ€ä¸‹ä½¿ç»„ä»¶çš„æ˜¾ç¤ºä¸åŒ(è‡ªå·±ç®¡ç†)

###(1) å®šä¹‰state

ç¬¬ä¸€ç§æ–¹å¼

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'
class App extends Component {
  state = {
    name: 'React',
    isLiked: false
  }
  render () {
    return (
      <div>
        <h1>æ¬¢è¿æ¥åˆ°{this.state.name}çš„ä¸–ç•Œ</h1>
        <button>
          {
            this.state.isLiked ? 'â¤ï¸å–æ¶ˆ' : 'ğŸ–¤æ”¶è—'
          }
        </button>
      </div>
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```
å¦ä¸€ç§æ–¹å¼(æ¨è)

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  constructor() {
    super()
    this.state = {
      name: 'React',
      isLiked: false
    }
  }
  render () {
    return (
  		<div>
        <h1>æ¬¢è¿æ¥åˆ°{this.state.name}çš„ä¸–ç•Œ</h1>
        <button>
          {
            this.state.isLiked ? 'â¤ï¸å–æ¶ˆ' : 'ğŸ–¤æ”¶è—'
          }
        </button>
      </div>
  	)
  }
}
ReactDOM.render(
  <App/>,
  document.getElementById('root')
)
```
`this.props`å’Œ`this.state`æ˜¯çº¯jså¯¹è±¡,åœ¨vueä¸­ï¼Œdataå±æ€§æ˜¯åˆ©ç”¨`Object.defineProperty`å¤„ç†è¿‡çš„ï¼Œæ›´æ”¹â€‹dataçš„æ•°æ®çš„æ—¶å€™ä¼šè§¦å‘æ•°æ®çš„`getter`å’Œ`setter`ï¼Œä½†æ˜¯Reactä¸­æ²¡æœ‰åšè¿™æ ·çš„å¤„ç†ï¼Œå¦‚æœç›´æ¥æ›´æ”¹çš„è¯ï¼Œreactæ˜¯æ— æ³•å¾—çŸ¥çš„ï¼Œæ‰€ä»¥ï¼Œéœ€è¦ä½¿ç”¨ç‰¹æ®Šçš„æ›´æ”¹çŠ¶æ€çš„æ–¹æ³•`setState`ã€‚

###(2) setState

`isLiked` å­˜æ”¾åœ¨å®ä¾‹çš„ `state` å¯¹è±¡å½“ä¸­ï¼Œç»„ä»¶çš„ `render` å‡½æ•°å†…ï¼Œä¼šæ ¹æ®ç»„ä»¶çš„ `state` çš„ä¸­çš„`isLiked`ä¸åŒæ˜¾ç¤ºâ€œå–æ¶ˆâ€æˆ–â€œæ”¶è—â€å†…å®¹ã€‚ä¸‹é¢ç»™ `button` åŠ ä¸Šäº†ç‚¹å‡»çš„äº‹ä»¶ç›‘å¬ã€‚

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'
class App extends Component {
  constructor() {
    super()
    this.state = {
      name: 'React',
      isLiked: false
    }
  }
  handleBtnClick = () => {
    this.setState({
      isLiked: !this.state.isLiked
    })
  }
  render () {
    return (
      <div>
        <h1>æ¬¢è¿æ¥åˆ°{this.state.name}çš„ä¸–ç•Œ</h1>
        <button onClick={this.handleBtnClick}>
          {
            this.state.isLiked ? 'â¤ï¸å–æ¶ˆ' : 'ğŸ–¤æ”¶è—'
          }
        </button>
      </div>
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

`setState`æœ‰ä¸¤ä¸ªå‚æ•°

ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–¹æ³•returnä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå‚æ•°å«åš`updater`

- å‚æ•°æ˜¯å¯¹è±¡

  ```jsx
  this.setState({
    isLiked: !this.state.isLiked
  })
  ```

- å‚æ•°æ˜¯æ–¹æ³•

  ```jsx
  this.setState((prevState, props) => {
    return {
      isLiked: !prevState.isLiked
    }
  })
  ```

  æ³¨æ„çš„æ˜¯è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ä¸Šä¸€æ¬¡çš„state, ç¬¬äºŒä¸ªæ˜¯props

`setState`æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥æƒ³è¦è·å–åˆ°æœ€æ–°çš„stateï¼Œæ²¡æœ‰åŠæ³•è·å–ï¼Œå°±æœ‰äº†ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯é€‰çš„å›è°ƒå‡½æ•°

```jsx
this.setState((prevState, props) => {
  return {
    isLiked: !prevState.isLiked
  }
}, () => {
  console.log('å›è°ƒé‡Œçš„',this.state.isLiked)
})
console.log('setStateå¤–éƒ¨çš„',this.state.isLiked)
```
## 3ã€å±æ€§vsçŠ¶æ€

ç›¸ä¼¼ç‚¹ï¼šéƒ½æ˜¯çº¯jså¯¹è±¡ï¼Œéƒ½ä¼šè§¦å‘renderæ›´æ–°ï¼Œéƒ½å…·æœ‰ç¡®å®šæ€§ï¼ˆçŠ¶æ€/å±æ€§ç›¸åŒï¼Œç»“æœç›¸åŒï¼‰

ä¸åŒç‚¹ï¼š 

1. å±æ€§èƒ½ä»çˆ¶ç»„ä»¶è·å–ï¼ŒçŠ¶æ€ä¸èƒ½
2. å±æ€§å¯ä»¥ç”±çˆ¶ç»„ä»¶ä¿®æ”¹ï¼ŒçŠ¶æ€ä¸èƒ½
3. å±æ€§èƒ½åœ¨å†…éƒ¨è®¾ç½®é»˜è®¤å€¼ï¼ŒçŠ¶æ€ä¹Ÿå¯ä»¥
4. å±æ€§ä¸åœ¨ç»„ä»¶å†…éƒ¨ä¿®æ”¹ï¼ŒçŠ¶æ€è¦æ”¹
5. å±æ€§èƒ½è®¾ç½®å­ç»„ä»¶åˆå§‹å€¼ï¼ŒçŠ¶æ€ä¸å¯ä»¥
6. å±æ€§å¯ä»¥ä¿®æ”¹å­ç»„ä»¶çš„å€¼ï¼ŒçŠ¶æ€ä¸å¯ä»¥

`state` çš„ä¸»è¦ä½œç”¨æ˜¯ç”¨äºç»„ä»¶ä¿å­˜ã€æ§åˆ¶ã€ä¿®æ”¹è‡ªå·±çš„å¯å˜çŠ¶æ€ã€‚`state` åœ¨ç»„ä»¶å†…éƒ¨åˆå§‹åŒ–ï¼Œå¯ä»¥è¢«ç»„ä»¶è‡ªèº«ä¿®æ”¹ï¼Œè€Œå¤–éƒ¨ä¸èƒ½è®¿é—®ä¹Ÿä¸èƒ½ä¿®æ”¹ã€‚ä½ å¯ä»¥è®¤ä¸º `state` æ˜¯ä¸€ä¸ªå±€éƒ¨çš„ã€åªèƒ½è¢«ç»„ä»¶è‡ªèº«æ§åˆ¶çš„æ•°æ®æºã€‚`state` ä¸­çŠ¶æ€å¯ä»¥é€šè¿‡ `this.setState`æ–¹æ³•è¿›è¡Œæ›´æ–°ï¼Œ`setState` ä¼šå¯¼è‡´ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚

`props` çš„ä¸»è¦ä½œç”¨æ˜¯è®©ä½¿ç”¨è¯¥ç»„ä»¶çš„çˆ¶ç»„ä»¶å¯ä»¥ä¼ å…¥å‚æ•°æ¥é…ç½®è¯¥ç»„ä»¶ã€‚å®ƒæ˜¯å¤–éƒ¨ä¼ è¿›æ¥çš„é…ç½®å‚æ•°ï¼Œç»„ä»¶å†…éƒ¨æ— æ³•æ§åˆ¶ä¹Ÿæ— æ³•ä¿®æ”¹ã€‚é™¤éå¤–éƒ¨ç»„ä»¶ä¸»åŠ¨ä¼ å…¥æ–°çš„ `props`ï¼Œå¦åˆ™ç»„ä»¶çš„ `props` æ°¸è¿œä¿æŒä¸å˜ã€‚

å¦‚æœæä¸æ¸… `state` å’Œ `props` çš„ä½¿ç”¨åœºæ™¯ï¼Œè®°ä½ä¸€ä¸ªç®€å•çš„è§„åˆ™ï¼š**å°½é‡å°‘åœ°ç”¨ `state`ï¼Œå¤šç”¨ `props`**ã€‚

æ²¡æœ‰ `state` çš„ç»„ä»¶å«æ— çŠ¶æ€ç»„ä»¶ï¼ˆstateless componentï¼‰ï¼Œè®¾ç½®äº† state çš„å«åšæœ‰çŠ¶æ€ç»„ä»¶ï¼ˆstateful componentï¼‰ã€‚å› ä¸ºçŠ¶æ€ä¼šå¸¦æ¥ç®¡ç†çš„å¤æ‚æ€§ï¼Œæˆ‘ä»¬å°½é‡å¤šåœ°å†™æ— çŠ¶æ€ç»„ä»¶ï¼Œå°½é‡å°‘åœ°å†™æœ‰çŠ¶æ€çš„ç»„ä»¶ã€‚è¿™æ ·ä¼šé™ä½ä»£ç ç»´æŠ¤çš„éš¾åº¦ï¼Œä¹Ÿä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢å¼ºç»„ä»¶çš„å¯å¤ç”¨æ€§ã€‚


##4ã€çŠ¶æ€æå‡

å¦‚æœæœ‰å¤šä¸ªç»„ä»¶å…±äº«ä¸€ä¸ªæ•°æ®ï¼ŒæŠŠè¿™ä¸ªæ•°æ®æ”¾åˆ°å…±åŒçš„çˆ¶çº§ç»„ä»¶ä¸­æ¥ç®¡ç†



## 5ã€å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶ 

Reactç»„ä»¶çš„æ•°æ®æ¸²æŸ“æ˜¯å¦è¢«è°ƒç”¨è€…ä¼ é€’çš„`props`å®Œå…¨æ§åˆ¶ï¼Œæ§åˆ¶åˆ™ä¸ºå—æ§ç»„ä»¶ï¼Œå¦åˆ™éå—æ§ç»„ä»¶ã€‚

## 6ã€æ¸²æŸ“æ•°æ®

- æ¡ä»¶æ¸²æŸ“

  ```jsx
  {
    condition ? 'â¤ï¸å–æ¶ˆ' : 'ğŸ–¤æ”¶è—'
  }
  ```

- åˆ—è¡¨æ¸²æŸ“

```jsx
// æ•°æ®
const people = [{
  id: 1,
  name: 'Leo',
  age: 35
}, {
  id: 2,
  name: 'XiaoMing',
  age: 16
}]
// æ¸²æŸ“åˆ—è¡¨
{
  people.map(person => {
    return (
      <dl key={person.id}>
        <dt>{person.name}</dt>
        <dd>age: {person.age}</dd>
      </dl>
    )
  })
}
```

Reactçš„é«˜æ•ˆä¾èµ–äºæ‰€è°“çš„ Virtual-DOMï¼Œå°½é‡ä¸ç¢° DOMã€‚å¯¹äºåˆ—è¡¨å…ƒç´ æ¥è¯´ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå…ƒç´ å¯èƒ½ä¼šåœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­æ”¹å˜ä½ç½®ã€‚è¦å®ç°è¿™ä¸ªæ“ä½œï¼Œåªéœ€è¦äº¤æ¢ä¸€ä¸‹ DOM ä½ç½®å°±è¡Œäº†ï¼Œä½†æ˜¯Reactå¹¶ä¸çŸ¥é“å…¶å®æˆ‘ä»¬åªæ˜¯æ”¹å˜äº†å…ƒç´ çš„ä½ç½®ï¼Œæ‰€ä»¥å®ƒä¼šé‡æ–°æ¸²æŸ“åé¢ä¸¤ä¸ªå…ƒç´ ï¼ˆå†æ‰§è¡Œ Virtual-DOM ï¼‰ï¼Œè¿™æ ·ä¼šå¤§å¤§å¢åŠ  DOM æ“ä½œã€‚ä½†å¦‚æœç»™æ¯ä¸ªå…ƒç´ åŠ ä¸Šå”¯ä¸€çš„æ ‡è¯†ï¼ŒReact å°±å¯ä»¥çŸ¥é“è¿™ä¸¤ä¸ªå…ƒç´ åªæ˜¯äº¤æ¢äº†ä½ç½®ï¼Œè¿™ä¸ªæ ‡è¯†å°±æ˜¯```key```ï¼Œè¿™ä¸ª `key` å¿…é¡»æ˜¯æ¯ä¸ªå…ƒç´ å”¯ä¸€çš„æ ‡è¯†

- dangerouslySetInnerHTML

å¯¹äºå¯Œæ–‡æœ¬åˆ›å»ºçš„å†…å®¹ï¼Œåå°æ‹¿åˆ°çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š

```js
content = "<p>React.jsæ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</p>"
```

å¤„äºå®‰å…¨çš„åŸå› ï¼ŒReactå½“ä¸­æ‰€æœ‰è¡¨è¾¾å¼çš„å†…å®¹ä¼šè¢«è½¬ä¹‰ï¼Œå¦‚æœç›´æ¥è¾“å…¥ï¼Œæ ‡ç­¾ä¼šè¢«å½“æˆæ–‡æœ¬ã€‚è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨`dangerouslySetHTML`å±æ€§ï¼Œå®ƒå…è®¸æˆ‘ä»¬åŠ¨æ€è®¾ç½®`innerHTML`

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  constructor() {
    super()
    this.state = {
      content : "<p>React.jsæ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</p>"
    }
  }
  render () {
    return (
  		<div
        // æ³¨æ„è¿™é‡Œæ˜¯ä¸¤ä¸ªä¸‹ä¸‹åˆ’çº¿ __html
        dangerouslySetInnerHTML={{__html: this.state.content}}
      />
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

# å››ã€äº‹ä»¶å¤„ç†
## 1ã€ç»‘å®šäº‹ä»¶

é‡‡ç”¨on+äº‹ä»¶åçš„æ–¹å¼æ¥ç»‘å®šä¸€ä¸ªäº‹ä»¶ï¼Œæ³¨æ„ï¼Œè¿™é‡Œå’ŒåŸç”Ÿçš„äº‹ä»¶æ˜¯æœ‰åŒºåˆ«çš„ï¼ŒåŸç”Ÿçš„äº‹ä»¶å…¨æ˜¯å°å†™`onclick`, Reacté‡Œçš„äº‹ä»¶æ˜¯é©¼å³°`onClick`ï¼Œ**Reactçš„äº‹ä»¶å¹¶ä¸æ˜¯åŸç”Ÿäº‹ä»¶ï¼Œè€Œæ˜¯åˆæˆäº‹ä»¶**ã€‚



## 2ã€äº‹ä»¶handlerçš„å†™æ³•

- ç›´æ¥åœ¨renderé‡Œå†™è¡Œå†…çš„ç®­å¤´å‡½æ•°(ä¸æ¨è)
- åœ¨ç»„ä»¶å†…ä½¿ç”¨ç®­å¤´å‡½æ•°å®šä¹‰ä¸€ä¸ªæ–¹æ³•(æ¨è)
- ç›´æ¥åœ¨ç»„ä»¶å†…å®šä¹‰ä¸€ä¸ªéç®­å¤´å‡½æ•°çš„æ–¹æ³•ï¼Œç„¶ååœ¨renderé‡Œç›´æ¥ä½¿ç”¨`onClick={this.handleClick.bind(this)}`(ä¸æ¨è)
- ç›´æ¥åœ¨ç»„ä»¶å†…å®šä¹‰ä¸€ä¸ªéç®­å¤´å‡½æ•°çš„æ–¹æ³•ï¼Œç„¶ååœ¨constructoré‡Œbind(this)(æ¨è)



## 3ã€Event å¯¹è±¡

å’Œæ™®é€šæµè§ˆå™¨ä¸€æ ·ï¼Œäº‹ä»¶handlerä¼šè¢«è‡ªåŠ¨ä¼ å…¥ä¸€ä¸ª `event` å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å’Œæ™®é€šçš„æµè§ˆå™¨ `event` å¯¹è±¡æ‰€åŒ…å«çš„æ–¹æ³•å’Œå±æ€§éƒ½åŸºæœ¬ä¸€è‡´ã€‚ä¸åŒçš„æ˜¯ Reactä¸­çš„ `event` å¯¹è±¡å¹¶ä¸æ˜¯æµè§ˆå™¨æä¾›çš„ï¼Œè€Œæ˜¯å®ƒè‡ªå·±å†…éƒ¨æ‰€æ„å»ºçš„ã€‚å®ƒåŒæ ·å…·æœ‰`event.stopPropagation`ã€`event.preventDefault` è¿™ç§å¸¸ç”¨çš„æ–¹æ³•



## 4ã€äº‹ä»¶çš„å‚æ•°ä¼ é€’

- åœ¨`render`é‡Œè°ƒç”¨æ–¹æ³•çš„åœ°æ–¹å¤–é¢åŒ…ä¸€å±‚ç®­å¤´å‡½æ•° 
- åœ¨`render`é‡Œé€šè¿‡`this.handleEvent.bind(this, å‚æ•°)`è¿™æ ·çš„æ–¹å¼æ¥ä¼ é€’
- é€šè¿‡`event`ä¼ é€’
- æ¯”è¾ƒæ¨èçš„æ˜¯åšä¸€ä¸ªå­ç»„ä»¶, åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰æ–¹æ³•ï¼Œé€šè¿‡`props`ä¼ é€’åˆ°å­ç»„ä»¶ä¸­ï¼Œç„¶ååœ¨å­ç»„ä»¶ä»¶é€šè¿‡`this.props.method`æ¥è°ƒç”¨



##5ã€å¤„ç†ç”¨æˆ·è¾“å…¥

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  constructor() {
    super()
    this.state = {
      xing: '',
      ming: ''
    }
  }
  handleInputChange = (e) => {
    this.setState({
      [e.target.name]: e.target.value
    })
  }
  render () {
    const {
      xing,
      ming
    } = this.state
    return (
  		<div>
        <label>
          <span>å§“:</span>
          <input
            type="text"
            name="xing"
            value={xing}
            onChange={this.handleInputChange}
          />
        </label>
        <label>
          <span>å:</span>
          <input
            type="text"
            name="ming"
            value={ming}
            onChange={this.handleInputChange}
          />
        </label>
        <p>æ¬¢è¿æ‚¨: {xing}{ming}</p>
      </div>
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

# äº”ã€è¡¨å•
åœ¨ React é‡Œï¼ŒHTML è¡¨å•å…ƒç´ çš„å·¥ä½œæ–¹å¼å’Œå…¶ä»–çš„ DOM å…ƒç´ æœ‰äº›ä¸åŒï¼Œè¿™æ˜¯å› ä¸ºè¡¨å•å…ƒç´ é€šå¸¸ä¼šä¿æŒä¸€äº›å†…éƒ¨çš„ stateã€‚ä¾‹å¦‚è¿™ä¸ªçº¯ HTML è¡¨å•åªæ¥å—ä¸€ä¸ªåç§°ï¼š

```html
<form>
  <label>
    åå­—:
    <input type="text" name="name" />
  </label>
  <input type="submit" value="æäº¤" />
</form>
```

æ­¤è¡¨å•å…·æœ‰é»˜è®¤çš„ HTML è¡¨å•è¡Œä¸ºï¼Œå³åœ¨ç”¨æˆ·æäº¤è¡¨å•åæµè§ˆåˆ°æ–°é¡µé¢ã€‚å¦‚æœä½ åœ¨ React ä¸­æ‰§è¡Œç›¸åŒçš„ä»£ç ï¼Œå®ƒä¾ç„¶æœ‰æ•ˆã€‚ä½†å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨ JavaScript å‡½æ•°å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¤„ç†è¡¨å•çš„æäº¤ï¼Œ åŒæ—¶è¿˜å¯ä»¥è®¿é—®ç”¨æˆ·å¡«å†™çš„è¡¨å•æ•°æ®ã€‚å®ç°è¿™ç§æ•ˆæœçš„æ ‡å‡†æ–¹å¼æ˜¯ä½¿ç”¨â€œå—æ§ç»„ä»¶â€ã€‚

## 1ã€å—æ§ç»„ä»¶
åœ¨ HTML ä¸­ï¼Œè¡¨å•å…ƒç´ ï¼ˆå¦‚`<input>`ã€ `<textarea>` å’Œ `<select>`ï¼‰é€šå¸¸è‡ªå·±ç»´æŠ¤ stateï¼Œå¹¶æ ¹æ®ç”¨æˆ·è¾“å…¥è¿›è¡Œæ›´æ–°ã€‚è€Œåœ¨ React ä¸­ï¼Œå¯å˜çŠ¶æ€ï¼ˆmutable stateï¼‰é€šå¸¸ä¿å­˜åœ¨ç»„ä»¶çš„ state å±æ€§ä¸­ï¼Œå¹¶ä¸”åªèƒ½é€šè¿‡ä½¿ç”¨`setState()`æ¥æ›´æ–°ã€‚

æˆ‘ä»¬å¯ä»¥æŠŠä¸¤è€…ç»“åˆèµ·æ¥ï¼Œä½¿ React çš„ state æˆä¸ºâ€œå”¯ä¸€æ•°æ®æºâ€ã€‚æ¸²æŸ“è¡¨å•çš„ React ç»„ä»¶è¿˜æ§åˆ¶ç€ç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­è¡¨å•å‘ç”Ÿçš„æ“ä½œã€‚è¢« React ä»¥è¿™ç§æ–¹å¼æ§åˆ¶å–å€¼çš„è¡¨å•è¾“å…¥å…ƒç´ å°±å«åšâ€œå—æ§ç»„ä»¶â€ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®©å‰ä¸€ä¸ªç¤ºä¾‹åœ¨æäº¤æ—¶æ‰“å°å‡ºåç§°ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¡¨å•å†™ä¸ºå—æ§ç»„ä»¶ï¼š

```js
class NameForm extends React.Component {
  constructor(props) {
    super(props);
    this.state = {value: ''};

    this.handleChange = this.handleChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  handleChange(event) {
    this.setState({value: event.target.value});
  }

  handleSubmit(event) {
    alert('æäº¤çš„åå­—: ' + this.state.value);
    event.preventDefault();
  }

  render() {
    return (
      <form onSubmit={this.handleSubmit}>
        <label>
          åå­—:
          <input type="text" value={this.state.value} onChange={this.handleChange} />
        </label>
        <input type="submit" value="æäº¤" />
      </form>
    );
  }
}
```

ç”±äºåœ¨è¡¨å•å…ƒç´ ä¸Šè®¾ç½®äº† `value` å±æ€§ï¼Œå› æ­¤æ˜¾ç¤ºçš„å€¼å°†å§‹ç»ˆä¸º `this.state.value`ï¼Œè¿™ä½¿å¾— React çš„ state æˆä¸ºå”¯ä¸€æ•°æ®æºã€‚ç”±äº `handlechange` åœ¨æ¯æ¬¡æŒ‰é”®æ—¶éƒ½ä¼šæ‰§è¡Œå¹¶æ›´æ–° React çš„ stateï¼Œå› æ­¤æ˜¾ç¤ºçš„å€¼å°†éšç€ç”¨æˆ·è¾“å…¥è€Œæ›´æ–°ã€‚

å¯¹äºå—æ§ç»„ä»¶æ¥è¯´ï¼Œè¾“å…¥çš„å€¼å§‹ç»ˆç”± React çš„ state é©±åŠ¨ã€‚ä½ ä¹Ÿå¯ä»¥å°† value ä¼ é€’ç»™å…¶ä»– UI å…ƒç´ ï¼Œæˆ–è€…é€šè¿‡å…¶ä»–äº‹ä»¶å¤„ç†å‡½æ•°é‡ç½®ï¼Œä½†è¿™æ„å‘³ç€ä½ éœ€è¦ç¼–å†™æ›´å¤šçš„ä»£ç ã€‚

## 2ã€textarea æ ‡ç­¾
åœ¨ HTML ä¸­, `<textarea>` å…ƒç´ é€šè¿‡å…¶å­å…ƒç´ å®šä¹‰å…¶æ–‡æœ¬:

```
<textarea>
  ä½ å¥½ï¼Œ è¿™æ˜¯åœ¨ text area é‡Œçš„æ–‡æœ¬
</textarea>
```

è€Œåœ¨ React ä¸­ï¼Œ`<textarea>` ä½¿ç”¨ `value` å±æ€§ä»£æ›¿ã€‚è¿™æ ·ï¼Œå¯ä»¥ä½¿å¾—ä½¿ç”¨ `<textarea>` çš„è¡¨å•å’Œä½¿ç”¨å•è¡Œ input çš„è¡¨å•éå¸¸ç±»ä¼¼ï¼š
```javascript
class EssayForm extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      value: 'è¯·æ’°å†™ä¸€ç¯‡å…³äºä½ å–œæ¬¢çš„ DOM å…ƒç´ çš„æ–‡ç« .'
    };

    this.handleChange = this.handleChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  handleChange(event) {
    this.setState({value: event.target.value});
  }

  handleSubmit(event) {
    alert('æäº¤çš„æ–‡ç« : ' + this.state.value);
    event.preventDefault();
  }

  render() {
    return (
      <form onSubmit={this.handleSubmit}>
        <label>
          æ–‡ç« :
          <textarea value={this.state.value} onChange={this.handleChange} />
        </label>
        <input type="submit" value="æäº¤" />
      </form>
    );
  }
}
```

è¯·æ³¨æ„ï¼Œ`this.state.value` åˆå§‹åŒ–äºæ„é€ å‡½æ•°ä¸­ï¼Œå› æ­¤æ–‡æœ¬åŒºåŸŸé»˜è®¤æœ‰åˆå€¼ã€‚



## 3ã€select æ ‡ç­¾

åœ¨ HTML ä¸­ï¼Œ`<select>` åˆ›å»ºä¸‹æ‹‰åˆ—è¡¨æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œå¦‚ä¸‹ HTML åˆ›å»ºäº†æ°´æœç›¸å…³çš„ä¸‹æ‹‰åˆ—è¡¨ï¼š

```
<select>
  <option value="grapefruit">è‘¡è„æŸš</option>
  <option value="lime">é…¸æ©™</option>
  <option selected value="coconut">æ¤°å­</option>
  <option value="mango">èŠ’æœ</option>
</select>
```
è¯·æ³¨æ„ï¼Œç”±äº `selected` å±æ€§çš„ç¼˜æ•…ï¼Œæ¤°å­é€‰é¡¹é»˜è®¤è¢«é€‰ä¸­ã€‚React å¹¶ä¸ä¼šä½¿ç”¨ `selected` å±æ€§ï¼Œè€Œæ˜¯åœ¨æ ¹ `select` æ ‡ç­¾ä¸Šä½¿ç”¨ `value` å±æ€§ã€‚è¿™åœ¨å—æ§ç»„ä»¶ä¸­æ›´ä¾¿æ·ï¼Œå› ä¸ºæ‚¨åªéœ€è¦åœ¨æ ¹æ ‡ç­¾ä¸­æ›´æ–°å®ƒã€‚ä¾‹å¦‚ï¼š

```javascript
class FlavorForm extends React.Component {
  constructor(props) {
    super(props);
    this.state = {value: 'coconut'};

    this.handleChange = this.handleChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  handleChange(event) {
    this.setState({value: event.target.value});
  }

  handleSubmit(event) {
    alert('ä½ å–œæ¬¢çš„é£å‘³æ˜¯: ' + this.state.value);
    event.preventDefault();
  }
  render() {
    return (
      <form onSubmit={this.handleSubmit}>
        <label>
          é€‰æ‹©ä½ å–œæ¬¢çš„é£å‘³:
          <select value={this.state.value} onChange={this.handleChange}>
            <option value="grapefruit">è‘¡è„æŸš</option>
            <option value="lime">é…¸æ©™</option>
            <option value="coconut">æ¤°å­</option>
            <option value="mango">èŠ’æœ</option>
          </select>
        </label>
        <input type="submit" value="æäº¤" />
      </form>
    );
  }
}
```
æ€»çš„æ¥è¯´ï¼Œè¿™ä½¿å¾—, `<input type="text">`, `<textarea>` å’Œ `<select>`ä¹‹ç±»çš„æ ‡ç­¾éƒ½éå¸¸ç›¸ä¼¼â€”å®ƒä»¬éƒ½æ¥å—ä¸€ä¸ª `value` å±æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥å®ç°å—æ§ç»„ä»¶ã€‚

> æ³¨æ„
>
> ä½ å¯ä»¥å°†æ•°ç»„ä¼ é€’åˆ° `value` å±æ€§ä¸­ï¼Œä»¥æ”¯æŒåœ¨ `select` æ ‡ç­¾ä¸­é€‰æ‹©å¤šä¸ªé€‰é¡¹ï¼š
>
> ```
> <select multiple={true} value={['B', 'C']}>
> ```
```javascript
class MulFlavorForm extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      value: "coconut",
      arr: [],
      options: [
        { value: "grapefruit", label: "è‘¡è„æŸš" },
        { value: "lime", label: "é…¸æ©™" },
        { value: "coconut", label: "æ¤°å­" },
        { value: "mango", label: "èŠ’æœ" }
      ]
    };

    this.handleChange = this.handleChange.bind(this);
  }

  handleChange(e){
    let idx = this.state.arr.findIndex(item=>{
      return item === e.target.value
    })
    if (idx >= 0) {
      this.state.arr.splice(idx,1);
    } else {
      this.state.arr.push(e.target.value);
    }
    let arr = this.state.arr;
    this.setState({arr});
  }
  render() {
    return (
      <div>
        <select multiple={true} value={this.state.arr} onChange={this.handleChange}>
          {this.state.options.map((item,index) => {
            return <option value={item.value} key={index}>{item.label}</option>;
          })}
        </select>
      </div>
    );
  }
}

export default Test4;
```
## 4ã€å¤„ç†å¤šä¸ªè¾“å…¥

å½“éœ€è¦å¤„ç†å¤šä¸ª `input` å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªå…ƒç´ æ·»åŠ  `name` å±æ€§ï¼Œå¹¶è®©å¤„ç†å‡½æ•°æ ¹æ® `event.target.name` çš„å€¼é€‰æ‹©è¦æ‰§è¡Œçš„æ“ä½œã€‚

```javascript
class Reservation extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      isGoing: true,
      numberOfGuests: 2
    };

    this.handleInputChange = this.handleInputChange.bind(this);
  }

  handleInputChange(event) {
    const target = event.target;
    const value = target.type === 'checkbox' ? target.checked : target.value;
    const name = target.name;

    this.setState({
      [name]: value
    });
  }
  render() {
    return (
      <form>
        <label>
          å‚ä¸:
          <input
            name="isGoing"
            type="checkbox"
            checked={this.state.isGoing}
            onChange={this.handleInputChange} />
        </label>
        <br />
        <label>
          æ¥å®¾äººæ•°:
          <input
            name="numberOfGuests"
            type="number"
            value={this.state.numberOfGuests}
            onChange={this.handleInputChange} />
        </label>
      </form>
    );
  }
}
```
## 5ã€æ–‡ä»¶ input æ ‡ç­¾

åœ¨ HTML ä¸­ï¼Œ`<input type="file">` å…è®¸ç”¨æˆ·ä»å­˜å‚¨è®¾å¤‡ä¸­é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œå°†å…¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæˆ–é€šè¿‡ä½¿ç”¨ JavaScript çš„ File API è¿›è¡Œæ§åˆ¶ã€‚

```html
<input type="file" />
```
å› ä¸ºå®ƒçš„ value åªè¯»ï¼Œæ‰€ä»¥å®ƒæ˜¯ React ä¸­çš„ä¸€ä¸ªéå—æ§ç»„ä»¶ã€‚å°†ä¸å…¶ä»–éå—æ§ç»„ä»¶åœ¨åç»­æ–‡æ¡£ä¸­ä¸€èµ·è®¨è®ºã€‚



## 6ã€å—æ§è¾“å…¥ç©ºå€¼

åœ¨å—æ§ç»„ä»¶ä¸ŠæŒ‡å®š value çš„ prop ä¼šé˜»æ­¢ç”¨æˆ·æ›´æ”¹è¾“å…¥ã€‚å¦‚æœä½ æŒ‡å®šäº† valueï¼Œä½†è¾“å…¥ä»å¯ç¼–è¾‘ï¼Œåˆ™å¯èƒ½æ˜¯ä½ æ„å¤–åœ°å°†value è®¾ç½®ä¸º undefined æˆ– nullã€‚

ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†è¿™ä¸€ç‚¹ã€‚ï¼ˆè¾“å…¥æœ€åˆè¢«é”å®šï¼Œä½†åœ¨çŸ­æ—¶é—´å»¶è¿Ÿåå˜ä¸ºå¯ç¼–è¾‘ã€‚ï¼‰

```javascript
ReactDOM.render(<input value="hi" />, mountNode);

setTimeout(function() {
  ReactDOM.render(<input value={null} />, mountNode);
}, 1000);
```

## 7ã€éå—æ§ç»„ä»¶

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨ [å—æ§ç»„ä»¶](https://zh-hans.reactjs.org/docs/forms.html#controlled-components) æ¥å¤„ç†è¡¨å•æ•°æ®ã€‚åœ¨ä¸€ä¸ªå—æ§ç»„ä»¶ä¸­ï¼Œè¡¨å•æ•°æ®æ˜¯ç”± React ç»„ä»¶æ¥ç®¡ç†çš„ã€‚å¦ä¸€ç§æ›¿ä»£æ–¹æ¡ˆæ˜¯ä½¿ç”¨éå—æ§ç»„ä»¶ï¼Œè¿™æ—¶è¡¨å•æ•°æ®å°†äº¤ç”± DOM èŠ‚ç‚¹æ¥å¤„ç†ã€‚

è¦ç¼–å†™ä¸€ä¸ªéå—æ§ç»„ä»¶ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªçŠ¶æ€æ›´æ–°éƒ½ç¼–å†™æ•°æ®å¤„ç†å‡½æ•°ï¼Œä½ å¯ä»¥ [ä½¿ç”¨ ref](https://zh-hans.reactjs.org/docs/refs-and-the-dom.html) æ¥ä» DOM èŠ‚ç‚¹ä¸­è·å–è¡¨å•æ•°æ®ã€‚

ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ä½¿ç”¨éå—æ§ç»„ä»¶æ¥å—ä¸€ä¸ªè¡¨å•çš„å€¼ï¼š

```javascript
class NameForm extends React.Component {
  constructor(props) {
    super(props);
    this.handleSubmit = this.handleSubmit.bind(this);
    this.input = React.createRef();
  }

  handleSubmit(event) {
    alert('A name was submitted: ' + this.input.current.value);
    event.preventDefault();
  }

  render() {
    return (
      <form onSubmit={this.handleSubmit}>
        <label>
          Name:
          <input type="text" ref={this.input} />
        </label>
        <input type="submit" value="Submit" />
      </form>
    );
  }
}
```
å› ä¸ºéå—æ§ç»„ä»¶å°†çœŸå®æ•°æ®å‚¨å­˜åœ¨ DOM èŠ‚ç‚¹ä¸­ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨éå—æ§ç»„ä»¶æ—¶ï¼Œæœ‰æ—¶å€™åè€Œæ›´å®¹æ˜“åŒæ—¶é›†æˆ React å’Œé React ä»£ç ã€‚å¦‚æœä½ ä¸ä»‹æ„ä»£ç ç¾è§‚æ€§ï¼Œå¹¶ä¸”å¸Œæœ›å¿«é€Ÿç¼–å†™ä»£ç ï¼Œä½¿ç”¨éå—æ§ç»„ä»¶å¾€å¾€å¯ä»¥å‡å°‘ä½ çš„ä»£ç é‡ã€‚å¦åˆ™ï¼Œä½ åº”è¯¥ä½¿ç”¨å—æ§ç»„ä»¶ã€‚

### (1) é»˜è®¤å€¼

åœ¨ React æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œè¡¨å•å…ƒç´ ä¸Šçš„ `value` å°†ä¼šè¦†ç›– DOM èŠ‚ç‚¹ä¸­çš„å€¼ï¼Œåœ¨éå—æ§ç»„ä»¶ä¸­ï¼Œä½ ç»å¸¸å¸Œæœ› React èƒ½èµ‹äºˆç»„ä»¶ä¸€ä¸ªåˆå§‹å€¼ï¼Œä½†æ˜¯ä¸å»æ§åˆ¶åç»­çš„æ›´æ–°ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹, ä½ å¯ä»¥æŒ‡å®šä¸€ä¸ª `defaultValue` å±æ€§ï¼Œè€Œä¸æ˜¯ `value`ã€‚

```javascript
render() {
  return (
    <form onSubmit={this.handleSubmit}>
      <label>
        Name:
        <input
          defaultValue="Bob"
          type="text"
          ref={this.input} />
      </label>
      <input type="submit" value="Submit" />
    </form>
  );
}
```
åŒæ ·ï¼Œ`<input type="checkbox">` å’Œ `<input type="radio">` æ”¯æŒ `defaultChecked`ï¼Œ`<select>` å’Œ `<textarea>` æ”¯æŒ `defaultValue`ã€‚



### (2) æ–‡ä»¶è¾“å…¥

åœ¨ HTML ä¸­ï¼Œ`<input type="file">` å¯ä»¥è®©ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæˆ–è€…é€šè¿‡ä½¿ç”¨ [File API](https://developer.mozilla.org/en-US/docs/Web/API/File/Using_files_from_web_applications) è¿›è¡Œæ“ä½œã€‚

åœ¨ React ä¸­ï¼Œ`<input type="file">` å§‹ç»ˆæ˜¯ä¸€ä¸ªéå—æ§ç»„ä»¶ï¼Œå› ä¸ºå®ƒçš„å€¼åªèƒ½ç”±ç”¨æˆ·è®¾ç½®ï¼Œè€Œä¸èƒ½é€šè¿‡ä»£ç æ§åˆ¶ã€‚

æ‚¨åº”è¯¥ä½¿ç”¨ File API ä¸æ–‡ä»¶è¿›è¡Œäº¤äº’ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ª [DOM èŠ‚ç‚¹çš„ ref](https://zh-hans.reactjs.org/docs/refs-and-the-dom.html) ä»è€Œåœ¨æäº¤è¡¨å•æ—¶è·å–æ–‡ä»¶çš„ä¿¡æ¯ã€‚

```javascript
class FileInput extends React.Component {
  constructor(props) {
    super(props);
    this.handleSubmit = this.handleSubmit.bind(this);
    this.fileInput = React.createRef();
  }
  handleSubmit(event) {
    event.preventDefault();
    alert(
      `Selected file - ${this.fileInput.current.files[0].name}`
    );
  }

  render() {
    return (
      <form onSubmit={this.handleSubmit}>
        <label>
          Upload file:
          <input type="file" ref={this.fileInput} />
        </label>
        <br />
        <button type="submit">Submit</button>
      </form>
    );
  }
}

ReactDOM.render(
  <FileInput />,
  document.getElementById('root')
);
```

# å…­ã€ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ

Reactä¸­ç»„ä»¶ä¹Ÿæœ‰ç”Ÿå‘½å‘¨æœŸï¼Œä¹Ÿå°±æ˜¯è¯´ä¹Ÿæœ‰å¾ˆå¤šé’©å­å‡½æ•°ä¾›æˆ‘ä»¬ä½¿ç”¨, ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘ä»¬ä¼šåˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼Œåˆå§‹åŒ–ã€è¿è¡Œä¸­ã€é”€æ¯ã€é”™è¯¯å¤„ç†(16.3ä¹‹å)
## 1ã€åˆå§‹åŒ–

åœ¨ç»„ä»¶åˆå§‹åŒ–é˜¶æ®µä¼šæ‰§è¡ŒÂ 
1. constructorÂ 

2. static getDerivedStateFromProps()

3. componentWillMount()Â /Â UNSAFE_componentWillMount()Â 

4. render()Â 

5. componentDidMount()


##2ã€æ›´æ–°é˜¶æ®µ

`props`æˆ–`state`çš„æ”¹å˜å¯èƒ½ä¼šå¼•èµ·ç»„ä»¶çš„æ›´æ–°ï¼Œç»„ä»¶é‡æ–°æ¸²æŸ“çš„è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨ä»¥ä¸‹æ–¹æ³•ï¼šÂ 

1.Â componentWillReceiveProps()Â /Â UNSAFE_componentWillReceiveProps()Â 
2.Â static getDerivedStateFromProps()
3.Â shouldComponentUpdate()Â 
4.Â componentWillUpdate()Â /Â UNSAFE_componentWillUpdate()Â 
5.Â render()Â 
6.Â getSnapshotBeforeUpdate()Â 
7.Â componentDidUpdate()

##3ã€å¸è½½é˜¶æ®µ

1. componentWillUnmount()



##4ã€é”™è¯¯å¤„ç†

1. componentDidCatch()
   
##5ã€å„ç”Ÿå‘½å‘¨æœŸè¯¦è§£

**(1) constructor(props)**

Reactç»„ä»¶çš„æ„é€ å‡½æ•°åœ¨æŒ‚è½½ä¹‹å‰è¢«è°ƒç”¨ã€‚åœ¨å®ç°`React.Component`æ„é€ å‡½æ•°æ—¶ï¼Œéœ€è¦å…ˆåœ¨æ·»åŠ å…¶ä»–å†…å®¹å‰ï¼Œè°ƒç”¨`super(props)`ï¼Œç”¨æ¥å°†çˆ¶ç»„ä»¶ä¼ æ¥çš„`props`ç»‘å®šåˆ°è¿™ä¸ªç±»ä¸­ï¼Œä½¿ç”¨`this.props`å°†ä¼šå¾—åˆ°ã€‚

å®˜æ–¹å»ºè®®ä¸è¦åœ¨`constructor`å¼•å…¥ä»»ä½•å…·æœ‰å‰¯ä½œç”¨å’Œè®¢é˜…åŠŸèƒ½çš„ä»£ç ï¼Œè¿™äº›åº”å½“ä½¿ç”¨`componentDidMount()`ã€‚

`constructor`ä¸­åº”å½“åšäº›åˆå§‹åŒ–çš„åŠ¨ä½œï¼Œå¦‚ï¼šåˆå§‹åŒ–`state`ï¼Œå°†äº‹ä»¶å¤„ç†å‡½æ•°ç»‘å®šåˆ°ç±»å®ä¾‹ä¸Šï¼Œä½†ä¹Ÿä¸è¦ä½¿ç”¨`setState()`ã€‚å¦‚æœæ²¡æœ‰å¿…è¦åˆå§‹åŒ–stateæˆ–ç»‘å®šæ–¹æ³•ï¼Œåˆ™ä¸éœ€è¦æ„é€ `constructor`ï¼Œæˆ–è€…æŠŠè¿™ä¸ªç»„ä»¶æ¢æˆçº¯å‡½æ•°å†™æ³•ã€‚

å½“ç„¶ä¹Ÿå¯ä»¥åˆ©ç”¨`props`åˆå§‹åŒ–`state`ï¼Œåœ¨ä¹‹åä¿®æ”¹`state`ä¸ä¼šå¯¹`props`é€ æˆä»»ä½•ä¿®æ”¹ï¼Œä½†ä»ç„¶å»ºè®®å¤§å®¶æå‡çŠ¶æ€åˆ°çˆ¶ç»„ä»¶ä¸­ï¼Œæˆ–ä½¿ç”¨`redux`ç»Ÿä¸€è¿›è¡ŒçŠ¶æ€ç®¡ç†ã€‚

```jsx
constructor(props) {
  super(props);
  this.state = {
    isLiked: props.isLiked
  };
}
```

**(2) static getDerivedStateFromProps(nextProps, prevState)**

React çš„ 16.3 ç‰ˆæœ¬ä¸­å¯¹ç”Ÿå‘½å‘¨æœŸè¿›è¡Œäº†è¾ƒå¤§çš„è°ƒæ•´ï¼Œè¿™æ˜¯ä¸ºäº†å¼€å‘è€…èƒ½æ­£ç¡®åœ°ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸï¼Œé¿å…è¯¯è§£å…¶æ¦‚å¿µè€Œé€ æˆåæ¨¡å¼ã€‚

æœ¬èŠ‚å°†é‡ç‚¹ä»‹ç» getDerivedStateFromProps è¿™ä¸ªç”Ÿå‘½å‘¨æœŸã€‚è¦æ³¨æ„çš„æ˜¯ï¼ŒReact 16.3 çš„ç‰ˆæœ¬ä¸­ getDerivedStateFromProps çš„è§¦å‘èŒƒå›´æ˜¯å’Œ 16.4^ æ˜¯ä¸åŒçš„ï¼Œä¸»è¦åŒºåˆ«æ˜¯åœ¨ `setState` å’Œ `forceUpdate` æ—¶ä¼šä¸ä¼šè§¦å‘ï¼Œå…·ä½“å¯ä»¥çœ‹è¿™ä¸ª[ç”Ÿå‘½å…¨å‘¨æœŸå›¾](http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/) ã€‚

å¯èƒ½çš„ä½¿ç”¨åœºæ™¯æœ‰ä¸¤ä¸ªï¼š

- æ— æ¡ä»¶çš„æ ¹æ® prop æ¥æ›´æ–°å†…éƒ¨ stateï¼Œä¹Ÿå°±æ˜¯åªè¦æœ‰ä¼ å…¥ prop å€¼ï¼Œ å°±æ›´æ–° state
- åªæœ‰ prop å€¼å’Œ state å€¼ä¸åŒæ—¶æ‰æ›´æ–° state å€¼ã€‚

æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹å‡ ä¸ªä¾‹å­ã€‚

å‡è®¾æˆ‘ä»¬æœ‰ä¸ªä¸€ä¸ªè¡¨æ ¼ç»„ä»¶ï¼Œå®ƒä¼šæ ¹æ®ä¼ å…¥çš„åˆ—è¡¨æ•°æ®æ¥æ›´æ–°è§†å›¾ã€‚


```jsx
class Table extends React.Component {
    state = {
        list: []
    }
    static getDerivedStateFromProps (props, state) {
        return {
            list: props.list
        }
    }
    render () {
        .... // å±•ç¤º list
    }
}
```

ä¸Šé¢çš„ä¾‹å­å°±æ˜¯ç¬¬ä¸€ç§ä½¿ç”¨åœºæ™¯ï¼Œä½†æ˜¯æ— æ¡ä»¶ä» prop ä¸­æ›´æ–° stateï¼Œæˆ‘ä»¬å®Œå…¨æ²¡å¿…è¦ä½¿ç”¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œç›´æ¥å¯¹ prop å€¼è¿›è¡Œæ“ä½œå°±å¥½äº†ï¼Œæ— éœ€ç”¨ state å€¼ç±»ä¿å­˜ã€‚

å†çœ‹ä¸€ä¸ªä¾‹å­ï¼Œè¿™ä¸ªä¾‹å­æ˜¯ä¸€ä¸ªé¢œè‰²é€‰æ‹©å™¨ï¼Œè¿™ä¸ªç»„ä»¶èƒ½é€‰æ‹©ç›¸åº”çš„é¢œè‰²å¹¶æ˜¾ç¤ºï¼ŒåŒæ—¶å®ƒèƒ½æ ¹æ®ä¼ å…¥ prop å€¼æ˜¾ç¤ºé¢œè‰²ã€‚

```jsx
Class ColorPicker extends React.Component {
    state = {
        color: '#000000'
    }
    static getDerivedStateFromProps (props, state) {
        if (props.color !== state.color) {
            return {
                color: props.color
            }
        }
        return null
    }
    ... // é€‰æ‹©é¢œè‰²æ–¹æ³•
    render () {
        .... // æ˜¾ç¤ºé¢œè‰²å’Œé€‰æ‹©é¢œè‰²æ“ä½œ
    }
}
```
ç°åœ¨æˆ‘ä»¬å¯ä»¥è¿™ä¸ªé¢œè‰²é€‰æ‹©å™¨æ¥é€‰æ‹©é¢œè‰²ï¼ŒåŒæ—¶æˆ‘ä»¬èƒ½ä¼ å…¥ä¸€ä¸ªé¢œè‰²å€¼å¹¶æ˜¾ç¤ºã€‚ä½†æ˜¯è¿™ä¸ªç»„ä»¶æœ‰ä¸€ä¸ª bugï¼Œå¦‚æœæˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªé¢œè‰²å€¼åï¼Œå†ä½¿ç”¨ç»„ä»¶å†…éƒ¨çš„é€‰æ‹©é¢œè‰²æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼šå‘ç°é¢œè‰²ä¸ä¼šå˜åŒ–ï¼Œä¸€ç›´æ˜¯ä¼ å…¥çš„é¢œè‰²å€¼ã€‚

è¿™æ˜¯ä½¿ç”¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸçš„ä¸€ä¸ªå¸¸è§ bugã€‚ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™ä¸ª bug å‘¢ï¼Ÿåœ¨å¼€å¤´æœ‰è¯´åˆ°ï¼Œåœ¨ React 16.4^ çš„ç‰ˆæœ¬ä¸­ `setState` å’Œ `forceUpdate` ä¹Ÿä¼šè§¦å‘è¿™ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥å†…éƒ¨ state å˜åŒ–åï¼Œåˆä¼šèµ° getDerivedStateFromProps æ–¹æ³•ï¼Œå¹¶æŠŠ state å€¼æ›´æ–°ä¸ºä¼ å…¥çš„ propã€‚

æ¥ä¸‹é‡Œæˆ‘ä»¬æ¥ä¿®å¤è¿™ä¸ªbugã€‚

```jsx
Class ColorPicker extends React.Component {
    state = {
        color: '#000000',
        prevPropColor: ''
    }
    static getDerivedStateFromProps (props, state) {
        if (props.color !== state.prevPropColor) {
            return {
                color: props.color
                prevPropColor: props.color
            }
        }
        return null
    }
    ... // é€‰æ‹©é¢œè‰²æ–¹æ³•
    render () {
        .... // æ˜¾ç¤ºé¢œè‰²å’Œé€‰æ‹©é¢œè‰²æ“ä½œ
    }
}
```


é€šè¿‡ä¿å­˜ä¸€ä¸ªä¹‹å‰ prop å€¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åªæœ‰ prop å˜åŒ–æ—¶æ‰å»ä¿®æ”¹ stateã€‚è¿™æ ·å°±è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚

è¿™é‡Œå°ç»“ä¸‹ getDerivedStateFromProps æ–¹æ³•ä½¿ç”¨çš„æ³¨æ„ç‚¹ï¼š

- åœ¨ä½¿ç”¨æ­¤ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œè¦æ³¨æ„æŠŠä¼ å…¥çš„ prop å€¼å’Œä¹‹å‰ä¼ å…¥çš„ prop è¿›è¡Œæ¯”è¾ƒã€‚
- å› ä¸ºè¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ˜¯é™æ€æ–¹æ³•ï¼ŒåŒæ—¶è¦ä¿æŒå®ƒæ˜¯çº¯å‡½æ•°ï¼Œä¸è¦äº§ç”Ÿå‰¯ä½œç”¨ã€‚

æˆ‘ä»¬åº”è¯¥è°¨æ…åœ°ä½¿ç”¨ getDerivedStateFromProps è¿™ä¸ªç”Ÿå‘½å‘¨æœŸã€‚ä½¿ç”¨æ—¶è¦æ³¨æ„ä¸‹é¢å‡ ç‚¹ï¼š

- å› ä¸ºè¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ˜¯é™æ€æ–¹æ³•ï¼ŒåŒæ—¶è¦ä¿æŒå®ƒæ˜¯çº¯å‡½æ•°ï¼Œä¸è¦äº§ç”Ÿå‰¯ä½œç”¨ã€‚
- åœ¨ä½¿ç”¨æ­¤ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œè¦æ³¨æ„æŠŠä¼ å…¥çš„ prop å€¼å’Œä¹‹å‰ä¼ å…¥çš„ prop è¿›è¡Œæ¯”è¾ƒï¼ˆè¿™ä¸ª prop å€¼æœ€å¥½æœ‰å”¯ä¸€æ€§ï¼Œæˆ–è€…ä½¿ç”¨ä¸€ä¸ªå”¯ä¸€æ€§çš„ prop å€¼æ¥ä¸“é—¨æ¯”è¾ƒï¼‰ã€‚
- ä¸ä½¿ç”¨ getDerivedStateFromPropsï¼Œå¯ä»¥æ”¹æˆç»„ä»¶ä¿æŒå®Œå…¨ä¸å¯æ§æ¨¡å¼ï¼Œé€šè¿‡åˆå§‹å€¼å’Œ key å€¼æ¥å®ç° prop æ”¹å˜ state çš„æƒ…æ™¯ã€‚

**(3) componentWillMount() / UNSAFE_componentWillMount()**

`componentWillMount()`å°†åœ¨Reactæœªæ¥ç‰ˆæœ¬(å®˜æ–¹è¯´æ³• 17.0)ä¸­è¢«å¼ƒç”¨ã€‚`UNSAFE_componentWillMount()`åœ¨ç»„ä»¶æŒ‚è½½å‰è¢«è°ƒç”¨ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­è°ƒç”¨`setState()`ä¸ä¼šèµ·ä½œç”¨ï¼Œæ˜¯ç”±äºä»–åœ¨`render()`å‰è¢«è°ƒç”¨ã€‚

ä¸ºäº†é¿å…å‰¯ä½œç”¨å’Œå…¶ä»–çš„è®¢é˜…ï¼Œå®˜æ–¹éƒ½å»ºè®®ä½¿ç”¨`componentDidMount()`ä»£æ›¿ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨äºåœ¨æœåŠ¡å™¨æ¸²æŸ“ä¸Šçš„å”¯ä¸€æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å› ä¸ºæ˜¯åœ¨æ¸²æŸ“ä¹‹å‰è¢«è°ƒç”¨ï¼Œä¹Ÿæ˜¯æƒŸä¸€ä¸€ä¸ªå¯ä»¥ç›´æ¥åŒæ­¥ä¿®æ”¹stateçš„åœ°æ–¹ã€‚

**(4) render()**

render()æ–¹æ³•æ˜¯å¿…éœ€çš„ã€‚å½“ä»–è¢«è°ƒç”¨æ—¶ï¼Œä»–å°†è®¡ç®—`this.props`å’Œ`this.state`ï¼Œå¹¶è¿”å›ä»¥ä¸‹ä¸€ç§ç±»å‹ï¼šÂ 
- Reactå…ƒç´ ã€‚é€šè¿‡jsxåˆ›å»ºï¼Œæ—¢å¯ä»¥æ˜¯domå…ƒç´ ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ç»„ä»¶ã€‚Â 
- å­—ç¬¦ä¸²æˆ–æ•°å­—ã€‚ä»–ä»¬å°†ä¼šä»¥æ–‡æœ¬èŠ‚ç‚¹å½¢å¼æ¸²æŸ“åˆ°domä¸­ã€‚Â 
- Portalsã€‚react 16ç‰ˆæœ¬ä¸­æå‡ºçš„æ–°çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥ä½¿ç»„ä»¶è„±ç¦»çˆ¶ç»„ä»¶å±‚çº§ç›´æ¥æŒ‚è½½åœ¨DOMæ ‘çš„ä»»ä½•ä½ç½®ã€‚Â 
- nullï¼Œä»€ä¹ˆä¹Ÿä¸æ¸²æŸ“Â 
- å¸ƒå°”å€¼ã€‚ä¹Ÿæ˜¯ä»€ä¹ˆéƒ½ä¸æ¸²æŸ“ã€‚

å½“è¿”å›`null`,`false`,`ReactDOM.findDOMNode(this)`å°†ä¼šè¿”å›nullï¼Œä»€ä¹ˆéƒ½ä¸ä¼šæ¸²æŸ“ã€‚

`render()`æ–¹æ³•å¿…é¡»æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œä»–ä¸åº”è¯¥æ”¹å˜`state`ï¼Œä¹Ÿä¸èƒ½ç›´æ¥å’Œæµè§ˆå™¨è¿›è¡Œäº¤äº’ï¼Œåº”è¯¥å°†äº‹ä»¶æ”¾åœ¨å…¶ä»–ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ã€‚ 
å¦‚æœ`shouldComponentUpdate()`è¿”å›`false`ï¼Œ`render()`ä¸ä¼šè¢«è°ƒç”¨ã€‚

**(5) componentDidMount**

`componentDidMount`åœ¨ç»„ä»¶è¢«è£…é…åç«‹å³è°ƒç”¨ã€‚åˆå§‹åŒ–ä½¿å¾—DOMèŠ‚ç‚¹åº”è¯¥è¿›è¡Œåˆ°è¿™é‡Œã€‚

**é€šå¸¸åœ¨è¿™é‡Œè¿›è¡Œajaxè¯·æ±‚**

å¦‚æœè¦åˆå§‹åŒ–ç¬¬ä¸‰æ–¹çš„domåº“ï¼Œä¹Ÿåœ¨è¿™é‡Œè¿›è¡Œåˆå§‹åŒ–ã€‚åªæœ‰åˆ°è¿™é‡Œæ‰èƒ½è·å–åˆ°çœŸå®çš„dom.

**(6) componentWillReceiveProps()/UNSAFE_componentWillReceiveProps(nextProps)**

å®˜æ–¹å»ºè®®ä½¿ç”¨`getDerivedStateFromProps`å‡½æ•°ä»£æ›¿`componentWillReceiveProps`ã€‚å½“ç»„ä»¶æŒ‚è½½åï¼Œæ¥æ”¶åˆ°æ–°çš„`props`åä¼šè¢«è°ƒç”¨ã€‚å¦‚æœéœ€è¦æ›´æ–°`state`æ¥å“åº”`props`çš„æ›´æ”¹ï¼Œåˆ™å¯ä»¥è¿›è¡Œ`this.props`å’Œ`nextProps`çš„æ¯”è¾ƒï¼Œå¹¶åœ¨æ­¤æ–¹æ³•ä¸­ä½¿ç”¨`this.setState()`ã€‚

å¦‚æœçˆ¶ç»„ä»¶ä¼šè®©è¿™ä¸ªç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå³ä½¿`props`æ²¡æœ‰æ”¹å˜ï¼Œä¹Ÿä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚

Reactä¸ä¼šåœ¨ç»„ä»¶åˆå§‹åŒ–propsæ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚è°ƒç”¨`this.setState`ä¹Ÿä¸ä¼šè§¦å‘ã€‚

**(7) shouldComponentUpdate(nextProps, nextState)**

è°ƒç”¨`shouldComponentUpdate`ä½¿ReactçŸ¥é“ï¼Œç»„ä»¶çš„è¾“å‡ºæ˜¯å¦å—`state`å’Œ`props`çš„å½±å“ã€‚é»˜è®¤æ¯ä¸ªçŠ¶æ€çš„æ›´æ”¹éƒ½ä¼šé‡æ–°æ¸²æŸ“ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹åº”è¯¥ä¿æŒè¿™ä¸ªé»˜è®¤è¡Œä¸ºã€‚

åœ¨æ¸²æŸ“æ–°çš„`props`æˆ–`state`å‰ï¼Œ`shouldComponentUpdate`ä¼šè¢«è°ƒç”¨ã€‚é»˜è®¤ä¸º`true`ã€‚è¿™ä¸ªæ–¹æ³•ä¸ä¼šåœ¨åˆå§‹åŒ–æ—¶è¢«è°ƒç”¨ï¼Œä¹Ÿä¸ä¼šåœ¨`forceUpdate()`æ—¶è¢«è°ƒç”¨ã€‚è¿”å›`false`ä¸ä¼šé˜»æ­¢å­ç»„ä»¶åœ¨`state`æ›´æ”¹æ—¶é‡æ–°æ¸²æŸ“ã€‚

å¦‚æœ`shouldComponentUpdate()`è¿”å›`false`ï¼Œ`componentWillUpdate`,`render`å’Œ`componentDidUpdate`ä¸ä¼šè¢«è°ƒç”¨ã€‚

> å®˜æ–¹å¹¶ä¸å»ºè®®åœ¨`shouldComponentUpdate()`ä¸­è¿›è¡Œæ·±åº¦æŸ¥è¯¢æˆ–ä½¿ç”¨`JSON.stringify()`ï¼Œä»–æ•ˆç‡éå¸¸ä½ï¼Œå¹¶ä¸”æŸä¼¤æ€§èƒ½ã€‚

**(8) UNSAFE_componentWillUpdate(nextProps, nextState)**

åœ¨æ¸²æŸ“æ–°çš„`state`æˆ–`props`æ—¶ï¼Œ`UNSAFE_componentWillUpdate`ä¼šè¢«è°ƒç”¨ï¼Œå°†æ­¤ä½œä¸ºåœ¨æ›´æ–°å‘ç”Ÿä¹‹å‰è¿›è¡Œå‡†å¤‡çš„æœºä¼šã€‚è¿™ä¸ªæ–¹æ³•ä¸ä¼šåœ¨åˆå§‹åŒ–æ—¶è¢«è°ƒç”¨ã€‚

*ä¸èƒ½åœ¨è¿™é‡Œä½¿ç”¨this.setState()*ï¼Œä¹Ÿä¸èƒ½åšä¼šè§¦å‘è§†å›¾æ›´æ–°çš„æ“ä½œã€‚å¦‚æœéœ€è¦æ›´æ–°`state`æˆ–`props`ï¼Œè°ƒç”¨`getDerivedStateFromProps`ã€‚

**(9) getSnapshotBeforeUpdate()**

åœ¨react `render()`åçš„è¾“å‡ºè¢«æ¸²æŸ“åˆ°DOMä¹‹å‰è¢«è°ƒç”¨ã€‚å®ƒä½¿æ‚¨çš„ç»„ä»¶èƒ½å¤Ÿåœ¨å®ƒä»¬è¢«æ½œåœ¨æ›´æ”¹ä¹‹å‰æ•è·å½“å‰å€¼ï¼ˆå¦‚æ»šåŠ¨ä½ç½®ï¼‰ã€‚è¿™ä¸ªç”Ÿå‘½å‘¨æœŸè¿”å›çš„ä»»ä½•å€¼éƒ½å°†ä½œä¸ºå‚æ•°ä¼ é€’ç»™componentDidUpdateï¼ˆï¼‰ã€‚

**(10) componentDidUpdate(prevProps, prevState, snapshot)**

åœ¨æ›´æ–°å‘ç”Ÿåç«‹å³è°ƒç”¨`componentDidUpdate()`ã€‚æ­¤æ–¹æ³•ä¸ç”¨äºåˆå§‹æ¸²æŸ“ã€‚å½“ç»„ä»¶æ›´æ–°æ—¶ï¼Œå°†æ­¤ä½œä¸ºä¸€ä¸ªæœºä¼šæ¥æ“ä½œDOMã€‚åªè¦æ‚¨å°†å½“å‰çš„propsä¸ä»¥å‰çš„propsè¿›è¡Œæ¯”è¾ƒï¼ˆä¾‹å¦‚ï¼Œå¦‚æœpropsæ²¡æœ‰æ”¹å˜ï¼Œåˆ™å¯èƒ½ä¸éœ€è¦ç½‘ç»œè¯·æ±‚ï¼‰ï¼Œè¿™ä¹Ÿæ˜¯åšç½‘ç»œè¯·æ±‚çš„å¥½åœ°æ–¹ã€‚

å¦‚æœç»„ä»¶å®ç°`getSnapshotBeforeUpdate()`ç”Ÿå‘½å‘¨æœŸï¼Œåˆ™å®ƒè¿”å›çš„å€¼å°†ä½œä¸ºç¬¬ä¸‰ä¸ªâ€œå¿«ç…§â€å‚æ•°ä¼ é€’ç»™`componentDidUpdate()`ã€‚å¦åˆ™ï¼Œè¿™ä¸ªå‚æ•°æ˜¯`undefined`ã€‚

**(11) componentWillUnmount()**

åœ¨ç»„ä»¶è¢«å¸è½½å¹¶é”€æ¯ä¹‹å‰ç«‹å³è¢«è°ƒç”¨ã€‚åœ¨æ­¤æ–¹æ³•ä¸­æ‰§è¡Œä»»ä½•å¿…è¦çš„æ¸…ç†ï¼Œä¾‹å¦‚ä½¿å®šæ—¶å™¨æ— æ•ˆï¼Œå–æ¶ˆç½‘ç»œè¯·æ±‚æˆ–æ¸…ç†åœ¨`componentDidMount`ä¸­åˆ›å»ºçš„ä»»ä½•ç›‘å¬ã€‚

**(12) componentDidCatch(error, info)**

é”™è¯¯è¾¹ç•Œæ˜¯Reactç»„ä»¶ï¼Œå¯ä»¥åœ¨å…¶å­ç»„ä»¶æ ‘ä¸­çš„ä»»ä½•ä½ç½®æ•è·JavaScripté”™è¯¯ï¼Œè®°å½•è¿™äº›é”™è¯¯å¹¶æ˜¾ç¤ºå›é€€UIï¼Œè€Œä¸æ˜¯å´©æºƒçš„ç»„ä»¶æ ‘ã€‚é”™è¯¯è¾¹ç•Œåœ¨æ¸²æŸ“æœŸé—´ï¼Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä»¥åŠæ•´ä¸ªæ ‘ä¸‹çš„æ„é€ å‡½æ•°ä¸­æ•è·é”™è¯¯ã€‚

å¦‚æœç±»ç»„ä»¶å®šä¹‰äº†æ­¤ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œåˆ™å®ƒå°†æˆé”™è¯¯è¾¹ç•Œã€‚åœ¨å®ƒä¸­è°ƒç”¨`setState()`å¯ä»¥è®©ä½ åœ¨ä¸‹é¢çš„æ ‘ä¸­æ•è·æœªå¤„ç†çš„JavaScripté”™è¯¯ï¼Œå¹¶æ˜¾ç¤ºä¸€ä¸ªåå¤‡UIã€‚åªèƒ½ä½¿ç”¨é”™è¯¯è¾¹ç•Œä»æ„å¤–å¼‚å¸¸ä¸­æ¢å¤; ä¸è¦è¯•å›¾å°†å®ƒä»¬ç”¨äºæ§åˆ¶æµç¨‹ã€‚

é”™è¯¯è¾¹ç•Œåªä¼šæ•è·æ ‘ä¸­ä¸‹é¢ç»„ä»¶ä¸­çš„é”™è¯¯ã€‚é”™è¯¯è¾¹ç•Œæœ¬èº«ä¸èƒ½æ•è·é”™è¯¯ã€‚

##6ã€PureComponent

`PureComponnet`é‡Œå¦‚æœæ¥æ”¶åˆ°çš„æ–°å±æ€§æˆ–è€…æ˜¯æ›´æ”¹åçš„çŠ¶æ€å’ŒåŸå±æ€§ã€åŸçŠ¶æ€ç›¸åŒçš„è¯ï¼Œå°±ä¸ä¼šå»é‡æ–°renderäº†
åœ¨é‡Œé¢ä¹Ÿå¯ä»¥ä½¿ç”¨`shouldComponentUpdate`ï¼Œè€Œä¸”ã€‚æ˜¯å¦é‡æ–°æ¸²æŸ“ä»¥`shouldComponentUpdate`çš„è¿”å›å€¼ä¸ºæœ€ç»ˆçš„å†³å®šå› ç´ ã€‚

```jsx
import React, { PureComponent } from 'react'

class YourComponent extends PureComponent {
  â€¦â€¦
}
```
##7ã€ref

Reactæä¾›çš„è¿™ä¸ª`ref`å±æ€§ï¼Œè¡¨ç¤ºä¸ºå¯¹ç»„ä»¶çœŸæ­£å®ä¾‹çš„å¼•ç”¨ï¼Œå…¶å®å°±æ˜¯`ReactDOM.render()`è¿”å›çš„ç»„ä»¶å®ä¾‹,`ref`å¯ä»¥æŒ‚è½½åˆ°ç»„ä»¶ä¸Šä¹Ÿå¯ä»¥æ˜¯domå…ƒç´ ä¸Šã€‚

- æŒ‚åˆ°ç»„ä»¶(`class`å£°æ˜çš„ç»„ä»¶)ä¸Šçš„refè¡¨ç¤ºå¯¹ç»„ä»¶å®ä¾‹çš„å¼•ç”¨ã€‚**ä¸èƒ½**åœ¨å‡½æ•°å¼ç»„ä»¶ä¸Šä½¿ç”¨ ref å±æ€§ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰å®ä¾‹ï¼š
- æŒ‚è½½åˆ°domå…ƒç´ ä¸Šæ—¶è¡¨ç¤ºå…·ä½“çš„domå…ƒç´ èŠ‚ç‚¹ã€‚

åœ¨React æœ€æ–°çš„ç‰ˆæœ¬ä¸­ï¼Œè¦ä½¿ç”¨`ref`, éœ€è¦ä½¿ç”¨`React.createRef`æ–¹æ³•å…ˆç”Ÿæˆä¸€ä¸ª`ref`ã€‚
```jsx
import React, { Component, createRef } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  constructor() {
    super()
    // åˆ›å»ºinputRef
    this.inputRef = createRef()
  }
  componentDidMount () {
    console.log(this.inputRef.current) // <input type="text">
  }
  render () {
    return (
  		<div>
        {/* å…³è”refå’Œdom */}
        <input type="text" ref={this.inputRef} />
      </div>
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```
